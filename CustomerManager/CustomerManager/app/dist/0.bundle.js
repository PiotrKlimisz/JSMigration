(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,function(e,t,r){"use strict";var n,o;n=[r(4)],void 0===(o=function(){var e=angular.module("customersApp",["ngRoute","ngAnimate","routeResolverServices","wc.directives","wc.animations","ui.bootstrap","breeze.angular"]);return e.config(["$routeProvider","routeResolverProvider","$controllerProvider","$compileProvider","$filterProvider","$provide","$httpProvider",function(t,r,n,o,i,u,s){e.register={controller:n.register,directive:o.directive,filter:i.register,factory:u.factory,service:u.service};var a=r.route;t.when("/customers",a.resolve("Customers","customers/","vm")).when("/customerorders/:customerId",a.resolve("CustomerOrders","customers/","vm")).when("/customeredit/:customerId",a.resolve("CustomerEdit","customers/","vm",!0)).when("/orders",a.resolve("Orders","orders/","vm")).when("/about",a.resolve("About","","vm")).when("/login/:redirect*?",a.resolve("Login","","vm")).otherwise({redirectTo:"/customers"})}]),e.run(["$rootScope","$location","authService",function(e,t,r){e.$on("$routeChangeStart",function(t,n,o){n&&n.$$route&&n.$$route.secure&&(r.user.isAuthenticated||e.$evalAsync(function(){r.redirectToLogin()}))})}]),e}.apply(t,n))||(e.exports=o)},function(e,t,r){"use strict";var n,o;n=[r(1)],void 0===(o=function(e){var t=function(e,t){var r="/api/dataservice/",n={};function o(e){for(var t=e.length,r=0;r<t;r++){var n=e[r];if(n.orders){for(var o=n.orders.length,i=0;i<o;i++){var s=n.orders[i];s.orderTotal=s.quantity*s.price}n.ordersTotal=u(n)}}}function i(t,n,i){var u=t;return u+=3==arguments.length?function(e,t){return"?$top="+t+"&$skip="+e*t}(n,i):"",e.get(r+u).then(function(e){var t=e.data;return o(t),{totalRecords:parseInt(e.headers("X-InlineCount")),results:t}})}function u(e){for(var t=0,r=e.orders,n=r.length,o=0;o<n;o++)t+=r[o].orderTotal;return t}return n.getCustomers=function(e,t){return i("customers",e,t)},n.getCustomersSummary=function(e,t){return i("customersSummary",e,t)},n.getStates=function(){return e.get(r+"states").then(function(e){return e.data})},n.checkUniqueValue=function(t,n,o){return t||(t=0),e.get(r+"checkUnique/"+t+"?property="+n+"&value="+escape(o)).then(function(e){return e.data.status})},n.insertCustomer=function(t){return e.post(r+"postCustomer",t).then(function(e){return t.id=e.data.id,e.data})},n.newCustomer=function(){return t.when({id:0})},n.updateCustomer=function(t){return e.put(r+"putCustomer/"+t.id,t).then(function(e){return e.data})},n.deleteCustomer=function(t){return e.delete(r+"deleteCustomer/"+t).then(function(e){return e.data})},n.getCustomer=function(t){return e.get(r+"customerById/"+t).then(function(e){return o([e.data]),e.data})},n};t.$inject=["$http","$q"],e.factory("customersService",t)}.apply(t,n))||(e.exports=o)},function(e,t,r){"use strict";var n,o;n=[r(1)],void 0===(o=function(e){var t=function(e,t,r){var n={},o=e.EntityQuery;e.config.initializeAdapterInstance("modelLibrary","backingStore",!0),e.NamingConvention.camelCase.setAsDefault();var i="breeze/breezedataservice",u=new e.EntityManager(i);function s(e,t){return e.using(u).execute().then(function(e,r,n){return t?e.results[0]:e.results},function(e){r.alert(e.message)})}function a(e,t,n,i){var s=o.from(e).skip(n*i).take(i).inlineCount(!0);return t&&""!=t&&(s=s.expand(t)),s.using(u).execute().then(function(e){return{totalRecords:parseInt(e.inlineCount),results:e.results}},function(e){r.alert("Error "+e.message)})}n.getCustomers=function(e,t){return a("Customers","orders",e,t)},n.getCustomersSummary=function(e,t){return a("CustomersSummary","",e,t)},n.getStates=function(){return function(e,t){var r=o.from(e);t&&(r=r.expand(t));return s(r)}("States")},n.getCustomer=function(e){return s(o.from("Customers").where("id","==",e).expand("Orders, State"),!0)},n.checkUniqueValue=function(t,r,n){var i=new e.Predicate(r,"==",n),s=t?i.and(new e.Predicate("id","!=",t)):i;return o.from("Customers").where(s).take(0).inlineCount().using(u).execute().then(function(e){return!(!e||0!=e.inlineCount)})},n.insertCustomer=function(e){return u.saveChanges()},n.newCustomer=function(){return(e=u.metadataStore,e.hasMetadataFor(i)?t.when(!0):e.fetchMetadata(i)).then(function(){return u.createEntity("Customer",{firstName:"",lastName:""})});var e},n.deleteCustomer=function(t){if(!t)return r.alert("ID was null - cannot delete"),null;var n=u.getEntityByKey("Customer",t);n?(n.orders.slice().forEach(function(e){u.detachEntity(e)}),n.entityAspect.setDeleted()):n=u.createEntity("Customer",{id:t,gender:"Male"},e.EntityState.Deleted);return u.saveChanges()},n.updateCustomer=function(e){return u.saveChanges()};return u.metadataStore.registerEntityTypeCtor("Order",function(){},function(e){e.orderTotal=e.quantity*e.price}),u.metadataStore.registerEntityTypeCtor("Customer",function(){},function(e){e.ordersTotal=function(e){for(var t=0,r=e.orders,n=r.length,o=0;o<n;o++)t+=r[o].orderTotal;return t}(e)}),n};t.$inject=["breeze","$q","$window"],e.factory("customersBreezeService",t)}.apply(t,n))||(e.exports=o)},function(e,t,r){"use strict";var n;void 0===(n=function(){angular.module("routeResolverServices",[]).provider("routeResolver",function(){var e,t,r,n;this.$get=function(){return this},this.routeConfig=(e="/app/customersApp/views/",t="/app/customersApp/controllers/",{setBaseDirectories:function(r,n){e=r,t=n},getControllersDirectory:function(){return t},getViewsDirectory:function(){return e}}),this.route=(r=this.routeConfig,n=function(e,t,r){return e.defer().promise},{resolve:function(e,t,o,i){t||(t="");var u={},s=e.charAt(0).toLowerCase()+e.substr(1);return u.templateUrl=r.getViewsDirectory()+t+s+".html",u.controller=e+"Controller",o&&(u.controllerAs=o),u.secure=i||!1,u.resolve={load:["$q","$rootScope",function(e,o){var i=[r.getControllersDirectory()+t+s+"Controller.js"];return n(e,o,i)}]},u}})})}.apply(t,[]))||(e.exports=n)},function(e,t,r){"use strict";var n,o;n=[r(1)],void 0===(o=function(e){var t=function(e){var t=this;function r(e){for(var r=0,n=0;n<e.orders.length;n++){r+=e.orders[n].orderTotal}t.ordersTotal=r}t.orderby="product",t.reverse=!1,t.ordersTotal=0,t.customer,e.customer?(t.customer=e.customer,r(e.customer)):e.$on("customer",function(e,n){t.customer=n,r(n)}),t.setOrder=function(e){e===t.orderby&&(t.reverse=!t.reverse),t.orderby=e}};t.$inject=["$scope"],e.controller("OrderChildController",t)}.apply(t,n))||(e.exports=o)},function(e,t,r){"use strict";var n,o;n=[r(1)],void 0===(o=function(e){var t=function(e,t,r,n){var o=this;function i(){var e="/login"+t.$$path;t.replace(),t.path(e)}function u(){o.loginLogoutText=n.user.isAuthenticated?"Logout":"Login"}o.isCollapsed=!1,o.appTitle=r.useBreeze?"Customer Management Breeze":"Customer Management",o.highlight=function(e){return t.path().substr(0,e.length)===e},o.loginOrOut=function(){u(),n.user.isAuthenticated&&n.logout().then(function(){t.path("/")}),i()},e.$on("loginStatusChanged",function(e){u()}),e.$on("redirectToLogin",function(){i()}),u()};t.$inject=["$scope","$location","config","authService"],e.controller("NavbarController",t)}.apply(t,n))||(e.exports=o)},function(e,t,r){"use strict";var n,o;n=[r(1)],void 0===(o=function(e){e.filter("nameProductFilter",function(){function e(e,t){if(e.orders)for(var r=0;r<e.orders.length;r++)if(e.orders[r].product.toLowerCase().indexOf(t)>-1)return!0;return!1}return function(t,r){if(!r||!t)return t;var n=[];r=r.toLowerCase();for(var o=0;o<t.length;o++){var i=t[o];(i.firstName.toLowerCase().indexOf(r)>-1||i.lastName.toLowerCase().indexOf(r)>-1||e(i,r))&&n.push(i)}return n}})}.apply(t,n))||(e.exports=o)},function(e,t,r){"use strict";var n,o;n=[r(1)],void 0===(o=function(e){e.filter("nameCityStateFilter",function(){return function(e,t){if(!t)return e;var r=[];t=t.toLowerCase();for(var n=0;n<e.length;n++){var o=e[n];(o.firstName.toLowerCase().indexOf(t)>-1||o.lastName.toLowerCase().indexOf(t)>-1||o.city.toLowerCase().indexOf(t)>-1||o.state.name.toLowerCase().indexOf(t)>-1)&&r.push(o)}return r}})}.apply(t,n))||(e.exports=o)},function(e,t,r){"use strict";var n,o;n=[r(1)],void 0===(o=function(e){e.config(["$httpProvider",function(e){var t=function(e,t){var r=function(r){return 401===r.status?(t.$broadcast("redirectToLogin",null),e.reject(r)):e.reject(r)};return{request:function(t){return t||e.when(t)},requestError:function(e){return r(e)},response:function(t){return t||e.when(t)},responseError:function(e){return r(e)}}};t.$inject=["$q","$rootScope"],e.interceptors.push(t)}])}.apply(t,n))||(e.exports=o)},function(e,t,r){"use strict";var n,o;n=[r(1)],void 0===(o=function(e){var t=function(e){var t={backdrop:!0,keyboard:!0,modalFade:!0,templateUrl:"/app/customersApp/partials/modal.html"},r={closeButtonText:"Close",actionButtonText:"OK",headerText:"Proceed?",bodyText:"Perform this action?"};this.showModal=function(e,t){return e||(e={}),e.backdrop="static",this.show(e,t)},this.show=function(n,o){var i={},u={};return angular.extend(i,t,n),angular.extend(u,r,o),i.controller||(i.controller=function(e,t){e.modalOptions=u,e.modalOptions.ok=function(e){t.close("ok")},e.modalOptions.close=function(e){t.close("cancel")}},i.controller.$inject=["$scope","$modalInstance"]),e.open(i).result}};t.$inject=["$modal"],e.service("modalService",t)}.apply(t,n))||(e.exports=o)},function(e,t,r){"use strict";var n,o;n=[r(1),r(3),r(2)],void 0===(o=function(e){var t=function(e,t,r){return e.useBreeze?r:t};t.$inject=["config","customersService","customersBreezeService"],e.factory("dataService",["config","customersService","customersBreezeService",t])}.apply(t,n))||(e.exports=o)},function(e,t,r){"use strict";var n,o;n=[r(1)],void 0===(o=function(e){var t=function(e,t){var r={loginPath:"/login",user:{isAuthenticated:!1,roles:null}};function n(e){r.user.isAuthenticated=e,t.$broadcast("loginStatusChanged",e)}return r.login=function(t,r){return e.post("/api/dataservice/login",{userLogin:{userName:t,password:r}}).then(function(e){var t=e.data.status;return n(t),t})},r.logout=function(){return e.post("/api/dataservice/logout").then(function(e){var t=!e.data.status;return n(t),t})},r.redirectToLogin=function(){t.$broadcast("redirectToLogin",null)},r};t.$inject=["$http","$rootScope"],e.factory("authService",t)}.apply(t,n))||(e.exports=o)},function(e,t,r){"use strict";var n,o;n=[r(1)],void 0===(o=function(e){e.value("config",{useBreeze:!1})}.apply(t,n))||(e.exports=o)},function(e,t,r){"use strict";var n,o;n=[r(1)],void 0===(o=function(e){var t=function(e,t){return{restrict:"A",require:"ngModel",link:function(r,n,o,i){i.$asyncValidators.unique=function(r,n){var i=e.defer(),u=r||n,s=o.wcUniqueKey,a=o.wcUniqueProperty;return s&&a?(t.checkUniqueValue(s,a,u).then(function(e){e?i.resolve():i.reject()}),i.promise):e.when(!0)}}}};t.$inject=["$q","dataService"],e.directive("wcUnique",t)}.apply(t,n))||(e.exports=o)},function(e,t,r){var n;void 0===(n=function(){angular.module("wc.animations",[]).animation(".card-animation",function(){return{enter:function(e,t){var r=100*Math.random();TweenMax.set(e,{opacity:0,left:r+"px"});var n=Math.random();TweenMax.to(e,.5,{opacity:1,left:"0px",ease:Back.easeInOut,delay:n,onComplete:t})},leave:function(e,t){TweenMax.to(e,.5,{opacity:0,left:"-50px",onComplete:t})}}})}.apply(t,[]))||(e.exports=n)}]]);